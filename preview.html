<html lang="fr">

<head>
    <title>Simple HA shutter</title>
    <script type="text/javascript" src="hass-shutter-alt-card.js"></script>
    <script>
        function init() {

            function cloneHass() {
                let clone = JSON.parse(JSON.stringify(global_hass));
                clone.callService = (...args) => {
                    console.log("SERVICE", args);
                }
                return clone;
            }

            const shutterCard = document.createElement("shutter-alt-card");
            document.body.appendChild(shutterCard);
            shutterCard.setConfig({
                entity: "cover.pergola_roof",
                debug: true
            })
            let global_hass = {
                states: {
                    "cover.pergola_roof": {
                        "attributes": {
                            current_position: 0
                        }
                    }
                }
            }

            shutterCard.hass = cloneHass();

            // add button 0
            var button0 = document.createElement('button');
            button0.type = 'button';
            button0.innerHTML = 'set 0%';
            document.body.appendChild(button0);

            button0.onclick = function () {
                global_hass.states["cover.pergola_roof"].attributes.current_tilt_position = 0;
                shutterCard.hass = cloneHass();
            };
            // add button 50
            var button50 = document.createElement('button');
            button50.type = 'button';
            button50.innerHTML = 'set 50%';
            document.body.appendChild(button50);

            button50.onclick = function () {
                global_hass.states["cover.pergola_roof"].attributes.current_tilt_position = 50;
                shutterCard.hass = cloneHass();
            };
            // add button 100
            var button100 = document.createElement('button');
            button100.type = 'button';
            button100.innerHTML = 'set 100%';
            document.body.appendChild(button100);

            button100.onclick = function () {
                global_hass.states["cover.pergola_roof"].attributes.current_tilt_position = 100;
                shutterCard.hass = cloneHass();
            };
        }
    </script>
    <style>.back {
        background: no-repeat url("https://images.unsplash.com/photo-1553095066-5014bc7b7f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2FsbCUyMGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D&w=1000&q=80");
    }
    </style>
</head>

<body class="back" onload="init()">
    <p name="my-shutter-cover">Sample</p>
</body>

</html>